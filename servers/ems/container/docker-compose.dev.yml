services:
  ems_server:
    container_name: ems_server_dev
    image: ems-server:latest
    build:
      # Sobe at√© a raiz do projeto (ems_system)
      context: ../../../
      # Aponta para o Dockerfile nesta pasta atual
      dockerfile: servers/ems/container/Dockerfile
      args:
        VERSION: ${VERSION:-dev}
        ENVIRONMENT: ${ENVIRONMENT:-development}
    ports:
      - "${SERVER_PORT}:${SERVER_PORT}"
    environment:
      - ENV=${ENVIRONMENT:-development}
    env_file:
      - .env
    restart: unless-stopped
    networks:
      - ems_system_net
    labels:
      com.ems.service: "ems-server"
      com.ems.environment: "development"

networks:
  ems_system_net:
    external: true